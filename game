# rock_paper_scissors.py
import random
import os

def clear_screen():
    """–û—á–∏—â–∞–µ—Ç —ç–∫—Ä–∞–Ω –∫–æ–Ω—Å–æ–ª–∏"""
    os.system('cls' if os.name == 'nt' else 'clear')

def get_user_choice():
    """–ü–æ–ª—É—á–∞–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    while True:
        print("\nüéÆ –í—ã–±–µ—Ä–∏ —Å–≤–æ–π —Ö–æ–¥:")
        print("1 - –ö–∞–º–µ–Ω—å üëä")
        print("2 - –ù–æ–∂–Ω–∏—Ü—ã ‚úåÔ∏è")
        print("3 - –ë—É–º–∞–≥–∞ ‚úã")
        print("0 - –í—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã")
        
        choice = input("–¢–≤–æ–π –≤—ã–±–æ—Ä (0-3): ")
        
        if choice in ['0', '1', '2', '3']:
            return choice
        else:
            print("‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 3")

def determine_winner(user, computer):
    """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ä–∞—É–Ω–¥–∞"""
    if user == computer:
        return "draw"
    elif (user == '1' and computer == '2') or \
         (user == '2' and computer == '3') or \
         (user == '3' and computer == '1'):
        return "user"
    else:
        return "computer"

def get_choice_name(choice):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞"""
    choices = {'1': '–ö–∞–º–µ–Ω—å üëä', '2': '–ù–æ–∂–Ω–∏—Ü—ã ‚úåÔ∏è', '3': '–ë—É–º–∞–≥–∞ ‚úã'}
    return choices.get(choice, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')

def play_round():
    """–ò–≥—Ä–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞—É–Ω–¥"""
    user_choice = get_user_choice()
    
    if user_choice == '0':
        return 'exit'
    
    computer_choice = str(random.randint(1, 3))
    
    print(f"\n–¢–≤–æ–π –≤—ã–±–æ—Ä: {get_choice_name(user_choice)}")
    print(f"–í—ã–±–æ—Ä –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: {get_choice_name(computer_choice)}")
    
    result = determine_winner(user_choice, computer_choice)
    
    if result == "user":
        print("üéâ –¢—ã –≤—ã–∏–≥—Ä–∞–ª —ç—Ç–æ—Ç —Ä–∞—É–Ω–¥!")
        return 'user'
    elif result == "computer":
        print("üíª –ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–∏–≥—Ä–∞–ª —ç—Ç–æ—Ç —Ä–∞—É–Ω–¥!")
        return 'computer'
    else:
        print("‚ö° –ù–∏—á—å—è!")
        return 'draw'

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–≥—Ä—ã"""
    clear_screen()
    print("üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É '–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞'!")
    print("=" * 50)
    
    user_score = 0
    computer_score = 0
    draw_count = 0
    round_count = 0
    
    while True:
        round_count += 1
        print(f"\n--- –†–∞—É–Ω–¥ {round_count} ---")
        
        result = play_round()
        
        if result == 'exit':
            break
        elif result == 'user':
            user_score += 1
        elif result == 'computer':
            computer_score += 1
        elif result == 'draw':
            draw_count += 1
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç
        print(f"\nüìä –¢–µ–∫—É—â–∏–π —Å—á–µ—Ç:")
        print(f"–¢—ã: {user_score} | –ö–æ–º–ø—å—é—Ç–µ—Ä: {computer_score} | –ù–∏—á—å–∏: {draw_count}")
        
        # –°–ø—Ä–∞—à–∏–≤–∞–µ–º, —Ö–æ—á–µ—Ç –ª–∏ –∏–≥—Ä–æ–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
        if round_count >= 3:
            continue_game = input("\n–•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å –µ—â–µ? (–¥/–Ω): ").lower()
            if continue_game not in ['–¥', '–¥–∞', 'y', 'yes']:
                break
    
    # –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    print("\n" + "=" * 50)
    print("üéä –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
    print(f"üìà –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
    print(f"–í—Å–µ–≥–æ —Ä–∞—É–Ω–¥–æ–≤: {round_count - 1}")
    print(f"–¢–≤–æ–∏ –ø–æ–±–µ–¥—ã: {user_score}")
    print(f"–ü–æ–±–µ–¥—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: {computer_score}")
    print(f"–ù–∏—á—å–∏: {draw_count}")
    
    if user_score > computer_score:
        print("üèÜ –¢—ã –ø–æ–±–µ–¥–∏–ª –≤ —ç—Ç–æ–π –∏–≥—Ä–µ!")
    elif computer_score > user_score:
        print("ü§ñ –ö–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–±–µ–¥–∏–ª –≤ —ç—Ç–æ–π –∏–≥—Ä–µ!")
    else:
        print("ü§ù –ü–∞—Ä—Ç–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–Ω–∏—á—å—é!")

if __name__ == "__main__":
    main()
